# FE-SSLLabs
# A front-end application for SSL labs
# Written by jurgen Schouppe
# please feel free to contribute 

The program is based on the outbut (Json files) generated by the sslscan scripts of qualys labs (ssllabs-scan)

A basics are quite simple

1 : Create a map (inside the $HOMEDIR/scans directory) with as name the FQDN for each site that you want to test.
2 : The scan.sh will populate this directory with a json file and creat a symbolic link for the latest scan, this link (name) will be used by our front end applcation in order to retreive the right arrays.

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#!/bin/bash

http_proxy=$PROXYIP:$PROXYPORT
export http_proxy
HOMEDIR=/data/sslscan
TMPDIR=$HOMEDIR/tmp
SCANDIR=$HOMEDIR/scans
#SCANCMD=/usr/bin/nslookup
SCANCMD=$HOMEDIR/bin/ssllabs-scan
JQCMD=/usr/bin/jq
JQGRADEFILTER=".[0].endpoints[0].grade"

HOSTS=$(cd $SCANDIR; ls -1d *)

for site in $HOSTS; do
        echo "Processing $site"
        echo "$site" > $TMPDIR/site.$$.txt
        scandate=$(date +"%Y%m%d-%H%M%S")
        scanresult=$($SCANCMD -hostfile $TMPDIR/site.$$.txt 2>$TMPDIR/scanerror.$$.txt)
        res=$?
        if [ $res -ne 0 ]; then
                echo "Error scanning $site ($res)"
                cat $TMPDIR/scanerror.$$.txt
                continue
        fi
        echo "Scanning $site complete"
        grade=$(echo "$scanresult" | $JQCMD $JQGRADEFILTER)
        grade=${grade//\"/}
        echo "$scanresult" > $SCANDIR/$site/$scandate.json
        if [ -e $SCANDIR/$site/latest.json ]; then
                ln -fs $(readlink $SCANDIR/$site/latest.json) $SCANDIR/$site/previous.json
        fi
        ln -fs $SCANDIR/$site/$scandate.json $SCANDIR/$site/latest.json
        echo "$grade" > $SCANDIR/$site/$scandate.grade
        if [ -e $SCANDIR/$site/latest.grade ]; then
                ln -fs $(readlink $SCANDIR/$site/latest.grade) $SCANDIR/$site/previous.grade
        fi
        ln -fs $SCANDIR/$site/$scandate.grade $SCANDIR/$site/latest.grade
done
rm $TMPDIR/site.$$.txt
rm $TMPDIR/scanerror.$$.txt
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

3: this scan.sh script can be launched once a week or once a day depending on yur personal needs with crontab for instance.
4: from that moment on, the only thing that you need is taht our webserver has access to the $HOMEDIR/scans directory 

